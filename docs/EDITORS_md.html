<!DOCTYPE html>
<html>
  <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Ruby LSP documentation</title>

  <script type="text/javascript">
    var rdoc_rel_prefix = "./";
    var index_rel_prefix = "./";
  </script>

  <script src="./js/search_index.js" defer></script>
  <script src="./js/snapper.js" defer></script>
  <link href="./css/snapper.css" rel="stylesheet">
</head>

  <body>
    <div id="main-container">
  <nav id="nav">
  <h3 class="title">Ruby LSP documentation</h3>

  <input id="side-search" type="text" placeholder="Search docs (CMD/CTRL + K)"></input>

  <ul id="navigation-list">
    <li id="getting-started"><a href="./index.html">Getting started</a></li>
    <p class="separator">PAGES</p>
    <li class="index-entry">
  <a href="./ADDONS_md.html">
    ADDONS
  </a>
</li>
<li class="index-entry">
  <a href="./CODE_OF_CONDUCT_md.html">
    CODE_OF_CONDUCT
  </a>
</li>
<li class="index-entry">
  <a href="./CONTRIBUTING_md.html">
    CONTRIBUTING
  </a>
</li>
<li class="index-entry">
  <a href="./DESIGN_AND_ROADMAP_md.html">
    DESIGN_AND_ROADMAP
  </a>
</li>
<li class="index-entry">
  <a href="./EDITORS_md.html">
    EDITORS
  </a>
</li>
<li class="index-entry">
  <a href="./README_md.html">
    README
  </a>
</li>
<li class="index-entry">
  <a href="./SEMANTIC_HIGHLIGHTING_md.html">
    SEMANTIC_HIGHLIGHTING
  </a>
</li>
<li class="index-entry">
  <a href="./TROUBLESHOOTING_md.html">
    TROUBLESHOOTING
  </a>
</li>

    <p class="separator">CODE</p>
    <li class="expandable-index-entry">
  <details>
    <summary><a href="./RuboCop.html">RuboCop</a></summary>
    <ul>
      <li class="expandable-index-entry">
  <details>
    <summary><a href="./RuboCop/Cop.html">Cop</a></summary>
    <ul>
      <li class="expandable-index-entry">
  <details>
    <summary><a href="./RuboCop/Cop/RubyLsp.html">RubyLsp</a></summary>
    <ul>
      <li class="index-entry"><a href="./RuboCop/Cop/RubyLsp/UseLanguageServerAliases.html">UseLanguageServerAliases</a></li><li class="index-entry"><a href="./RuboCop/Cop/RubyLsp/UseRegisterWithHandlerMethod.html">UseRegisterWithHandlerMethod</a></li>
    </ul>
  </details>
</li>

    </ul>
  </details>
</li>

    </ul>
  </details>
</li>
<li class="expandable-index-entry">
  <details>
    <summary><a href="./RubyIndexer.html">RubyIndexer</a></summary>
    <ul>
      <li class="index-entry"><a href="./RubyIndexer/ClassesAndModulesTest.html">ClassesAndModulesTest</a></li><li class="index-entry"><a href="./RubyIndexer/Collector.html">Collector</a></li><li class="index-entry"><a href="./RubyIndexer/Configuration.html">Configuration</a></li><li class="index-entry"><a href="./RubyIndexer/ConfigurationTest.html">ConfigurationTest</a></li><li class="index-entry"><a href="./RubyIndexer/ConstantTest.html">ConstantTest</a></li><li class="expandable-index-entry">
  <details>
    <summary><a href="./RubyIndexer/Entry.html">Entry</a></summary>
    <ul>
      <li class="index-entry"><a href="./RubyIndexer/Entry/Accessor.html">Accessor</a></li><li class="index-entry"><a href="./RubyIndexer/Entry/Alias.html">Alias</a></li><li class="index-entry"><a href="./RubyIndexer/Entry/BlockParameter.html">BlockParameter</a></li><li class="index-entry"><a href="./RubyIndexer/Entry/Class.html">Class</a></li><li class="index-entry"><a href="./RubyIndexer/Entry/Constant.html">Constant</a></li><li class="index-entry"><a href="./RubyIndexer/Entry/InstanceMethod.html">InstanceMethod</a></li><li class="index-entry"><a href="./RubyIndexer/Entry/KeywordParameter.html">KeywordParameter</a></li><li class="index-entry"><a href="./RubyIndexer/Entry/KeywordRestParameter.html">KeywordRestParameter</a></li><li class="index-entry"><a href="./RubyIndexer/Entry/Member.html">Member</a></li><li class="index-entry"><a href="./RubyIndexer/Entry/Method.html">Method</a></li><li class="index-entry"><a href="./RubyIndexer/Entry/Module.html">Module</a></li><li class="index-entry"><a href="./RubyIndexer/Entry/Namespace.html">Namespace</a></li><li class="index-entry"><a href="./RubyIndexer/Entry/OptionalKeywordParameter.html">OptionalKeywordParameter</a></li><li class="index-entry"><a href="./RubyIndexer/Entry/OptionalParameter.html">OptionalParameter</a></li><li class="index-entry"><a href="./RubyIndexer/Entry/Parameter.html">Parameter</a></li><li class="index-entry"><a href="./RubyIndexer/Entry/RequiredParameter.html">RequiredParameter</a></li><li class="index-entry"><a href="./RubyIndexer/Entry/RestParameter.html">RestParameter</a></li><li class="index-entry"><a href="./RubyIndexer/Entry/SingletonMethod.html">SingletonMethod</a></li><li class="index-entry"><a href="./RubyIndexer/Entry/UnresolvedAlias.html">UnresolvedAlias</a></li>
    </ul>
  </details>
</li>
<li class="expandable-index-entry">
  <details>
    <summary><a href="./RubyIndexer/Index.html">Index</a></summary>
    <ul>
      <li class="index-entry"><a href="./RubyIndexer/Index/UnresolvableAliasError.html">UnresolvableAliasError</a></li>
    </ul>
  </details>
</li>
<li class="index-entry"><a href="./RubyIndexer/IndexTest.html">IndexTest</a></li><li class="index-entry"><a href="./RubyIndexer/IndexablePath.html">IndexablePath</a></li><li class="index-entry"><a href="./RubyIndexer/MethodTest.html">MethodTest</a></li><li class="expandable-index-entry">
  <details>
    <summary><a href="./RubyIndexer/PrefixTree.html">PrefixTree</a></summary>
    <ul>
      <li class="index-entry"><a href="./RubyIndexer/PrefixTree/Node.html">Node</a></li>
    </ul>
  </details>
</li>
<li class="index-entry"><a href="./RubyIndexer/PrefixTreeTest.html">PrefixTreeTest</a></li><li class="index-entry"><a href="./RubyIndexer/TestCase.html">TestCase</a></li>
    </ul>
  </details>
</li>
<li class="expandable-index-entry">
  <details>
    <summary><a href="./RubyLsp.html">RubyLsp</a></summary>
    <ul>
      <li class="index-entry"><a href="./RubyLsp/Addon.html">Addon</a></li><li class="index-entry"><a href="./RubyLsp/CheckDocs.html">CheckDocs</a></li><li class="index-entry"><a href="./RubyLsp/DependencyDetector.html">DependencyDetector</a></li><li class="expandable-index-entry">
  <details>
    <summary><a href="./RubyLsp/Document.html">Document</a></summary>
    <ul>
      <li class="index-entry"><a href="./RubyLsp/Document/Scanner.html">Scanner</a></li>
    </ul>
  </details>
</li>
<li class="index-entry"><a href="./RubyLsp/Executor.html">Executor</a></li><li class="index-entry"><a href="./RubyLsp/Job.html">Job</a></li><li class="expandable-index-entry">
  <details>
    <summary><a href="./RubyLsp/Listeners.html">Listeners</a></summary>
    <ul>
      <li class="index-entry"><a href="./RubyLsp/Listeners/CodeLens.html">CodeLens</a></li><li class="index-entry"><a href="./RubyLsp/Listeners/Completion.html">Completion</a></li><li class="index-entry"><a href="./RubyLsp/Listeners/Definition.html">Definition</a></li><li class="index-entry"><a href="./RubyLsp/Listeners/DocumentHighlight.html">DocumentHighlight</a></li><li class="index-entry"><a href="./RubyLsp/Listeners/DocumentLink.html">DocumentLink</a></li><li class="index-entry"><a href="./RubyLsp/Listeners/DocumentSymbol.html">DocumentSymbol</a></li><li class="index-entry"><a href="./RubyLsp/Listeners/FoldingRanges.html">FoldingRanges</a></li><li class="index-entry"><a href="./RubyLsp/Listeners/Hover.html">Hover</a></li><li class="index-entry"><a href="./RubyLsp/Listeners/InlayHints.html">InlayHints</a></li><li class="index-entry"><a href="./RubyLsp/Listeners/SemanticHighlighting.html">SemanticHighlighting</a></li><li class="index-entry"><a href="./RubyLsp/Listeners/SignatureHelp.html">SignatureHelp</a></li>
    </ul>
  </details>
</li>
<li class="index-entry"><a href="./RubyLsp/Message.html">Message</a></li><li class="index-entry"><a href="./RubyLsp/Notification.html">Notification</a></li><li class="index-entry"><a href="./RubyLsp/ParameterScope.html">ParameterScope</a></li><li class="index-entry"><a href="./RubyLsp/Request.html">Request</a></li><li class="index-entry"><a href="./RubyLsp/RequestConfig.html">RequestConfig</a></li><li class="expandable-index-entry">
  <details>
    <summary><a href="./RubyLsp/Requests.html">Requests</a></summary>
    <ul>
      <li class="expandable-index-entry">
  <details>
    <summary><a href="./RubyLsp/Requests/CodeActionResolve.html">CodeActionResolve</a></summary>
    <ul>
      <li class="index-entry"><a href="./RubyLsp/Requests/CodeActionResolve/CodeActionError.html">CodeActionError</a></li><li class="index-entry"><a href="./RubyLsp/Requests/CodeActionResolve/Error.html">Error</a></li>
    </ul>
  </details>
</li>
<li class="index-entry"><a href="./RubyLsp/Requests/CodeActions.html">CodeActions</a></li><li class="index-entry"><a href="./RubyLsp/Requests/CodeLens.html">CodeLens</a></li><li class="index-entry"><a href="./RubyLsp/Requests/Completion.html">Completion</a></li><li class="index-entry"><a href="./RubyLsp/Requests/Definition.html">Definition</a></li><li class="index-entry"><a href="./RubyLsp/Requests/Diagnostics.html">Diagnostics</a></li><li class="index-entry"><a href="./RubyLsp/Requests/DocumentHighlight.html">DocumentHighlight</a></li><li class="index-entry"><a href="./RubyLsp/Requests/DocumentLink.html">DocumentLink</a></li><li class="index-entry"><a href="./RubyLsp/Requests/DocumentSymbol.html">DocumentSymbol</a></li><li class="index-entry"><a href="./RubyLsp/Requests/FoldingRanges.html">FoldingRanges</a></li><li class="expandable-index-entry">
  <details>
    <summary><a href="./RubyLsp/Requests/Formatting.html">Formatting</a></summary>
    <ul>
      <li class="index-entry"><a href="./RubyLsp/Requests/Formatting/Error.html">Error</a></li><li class="index-entry"><a href="./RubyLsp/Requests/Formatting/InvalidFormatter.html">InvalidFormatter</a></li>
    </ul>
  </details>
</li>
<li class="index-entry"><a href="./RubyLsp/Requests/Hover.html">Hover</a></li><li class="index-entry"><a href="./RubyLsp/Requests/InlayHints.html">InlayHints</a></li><li class="index-entry"><a href="./RubyLsp/Requests/OnTypeFormatting.html">OnTypeFormatting</a></li><li class="index-entry"><a href="./RubyLsp/Requests/Request.html">Request</a></li><li class="index-entry"><a href="./RubyLsp/Requests/SelectionRanges.html">SelectionRanges</a></li><li class="index-entry"><a href="./RubyLsp/Requests/SemanticHighlighting.html">SemanticHighlighting</a></li><li class="index-entry"><a href="./RubyLsp/Requests/ShowSyntaxTree.html">ShowSyntaxTree</a></li><li class="index-entry"><a href="./RubyLsp/Requests/SignatureHelp.html">SignatureHelp</a></li><li class="expandable-index-entry">
  <details>
    <summary><a href="./RubyLsp/Requests/Support.html">Support</a></summary>
    <ul>
      <li class="index-entry"><a href="./RubyLsp/Requests/Support/Annotation.html">Annotation</a></li><li class="index-entry"><a href="./RubyLsp/Requests/Support/Common.html">Common</a></li><li class="index-entry"><a href="./RubyLsp/Requests/Support/FormatterRunner.html">FormatterRunner</a></li><li class="index-entry"><a href="./RubyLsp/Requests/Support/InternalRuboCopError.html">InternalRuboCopError</a></li><li class="index-entry"><a href="./RubyLsp/Requests/Support/RuboCopDiagnostic.html">RuboCopDiagnostic</a></li><li class="index-entry"><a href="./RubyLsp/Requests/Support/RuboCopDiagnosticsRunner.html">RuboCopDiagnosticsRunner</a></li><li class="index-entry"><a href="./RubyLsp/Requests/Support/RuboCopFormattingRunner.html">RuboCopFormattingRunner</a></li><li class="expandable-index-entry">
  <details>
    <summary><a href="./RubyLsp/Requests/Support/RuboCopRunner.html">RuboCopRunner</a></summary>
    <ul>
      <li class="index-entry"><a href="./RubyLsp/Requests/Support/RuboCopRunner/ConfigurationError.html">ConfigurationError</a></li>
    </ul>
  </details>
</li>
<li class="index-entry"><a href="./RubyLsp/Requests/Support/SelectionRange.html">SelectionRange</a></li><li class="index-entry"><a href="./RubyLsp/Requests/Support/Sorbet.html">Sorbet</a></li><li class="index-entry"><a href="./RubyLsp/Requests/Support/SyntaxTreeFormattingRunner.html">SyntaxTreeFormattingRunner</a></li>
    </ul>
  </details>
</li>
<li class="index-entry"><a href="./RubyLsp/Requests/WorkspaceSymbol.html">WorkspaceSymbol</a></li>
    </ul>
  </details>
</li>
<li class="expandable-index-entry">
  <details>
    <summary><a href="./RubyLsp/ResponseBuilders.html">ResponseBuilders</a></summary>
    <ul>
      <li class="index-entry"><a href="./RubyLsp/ResponseBuilders/CollectionResponseBuilder.html">CollectionResponseBuilder</a></li><li class="expandable-index-entry">
  <details>
    <summary><a href="./RubyLsp/ResponseBuilders/DocumentSymbol.html">DocumentSymbol</a></summary>
    <ul>
      <li class="index-entry"><a href="./RubyLsp/ResponseBuilders/DocumentSymbol/SymbolHierarchyRoot.html">SymbolHierarchyRoot</a></li>
    </ul>
  </details>
</li>
<li class="index-entry"><a href="./RubyLsp/ResponseBuilders/Hover.html">Hover</a></li><li class="index-entry"><a href="./RubyLsp/ResponseBuilders/ResponseBuilder.html">ResponseBuilder</a></li><li class="expandable-index-entry">
  <details>
    <summary><a href="./RubyLsp/ResponseBuilders/SemanticHighlighting.html">SemanticHighlighting</a></summary>
    <ul>
      <li class="index-entry"><a href="./RubyLsp/ResponseBuilders/SemanticHighlighting/SemanticToken.html">SemanticToken</a></li><li class="index-entry"><a href="./RubyLsp/ResponseBuilders/SemanticHighlighting/SemanticTokenEncoder.html">SemanticTokenEncoder</a></li><li class="index-entry"><a href="./RubyLsp/ResponseBuilders/SemanticHighlighting/UndefinedTokenType.html">UndefinedTokenType</a></li>
    </ul>
  </details>
</li>
<li class="index-entry"><a href="./RubyLsp/ResponseBuilders/SignatureHelp.html">SignatureHelp</a></li>
    </ul>
  </details>
</li>
<li class="index-entry"><a href="./RubyLsp/Result.html">Result</a></li><li class="index-entry"><a href="./RubyLsp/RubyDocument.html">RubyDocument</a></li><li class="index-entry"><a href="./RubyLsp/Server.html">Server</a></li><li class="expandable-index-entry">
  <details>
    <summary><a href="./RubyLsp/SetupBundler.html">SetupBundler</a></summary>
    <ul>
      <li class="index-entry"><a href="./RubyLsp/SetupBundler/BundleNotLocked.html">BundleNotLocked</a></li>
    </ul>
  </details>
</li>
<li class="index-entry"><a href="./RubyLsp/Store.html">Store</a></li>
    </ul>
  </details>
</li>
<li class="expandable-index-entry">
  <details>
    <summary><a href="./URI.html">URI</a></summary>
    <ul>
      <li class="index-entry"><a href="./URI/Generic.html">Generic</a></li><li class="index-entry"><a href="./URI/Source.html">Source</a></li>
    </ul>
  </details>
</li>

  </ul>
</nav>

  <article>
<h1 id="label-Editors">Editors<span><a href="#label-Editors">&para;</a> <a href="#top">&uarr;</a></span></h1>

<p>This file contains community driven instructions on how to set up the Ruby LSP in editors other than VS Code. For VS Code, use the official <a href="https://marketplace.visualstudio.com/items?itemName=Shopify.ruby-lsp">Ruby LSP extension</a>.</p>
<!-- When adding a new editor to the list, either link directly to a website containing the instructions or link to a
new H2 header in this file containing the instructions. --><ul><li>
<p><a href="https://emacs-lsp.github.io/lsp-mode/page/lsp-ruby-lsp/">Emacs LSP Mode</a></p>
</li><li>
<p><a href="#Emacs-Eglot">Emacs Eglot</a></p>
</li><li>
<p><a href="#Neovim-LSP">Neovim LSP</a></p>
</li><li>
<p><a href="#sublime-text-lsp">Sublime Text LSP</a></p>
</li></ul>

<h2 id="label-Emacs+Eglot">Emacs Eglot<span><a href="#label-Emacs+Eglot">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p><a href="https://github.com/joaotavora/eglot">Eglot</a> runs solargraph server by default. To set it up with ruby-lsp you need to put that in your init file:</p>

<pre>(with-eval-after-load &#39;eglot
 (add-to-list &#39;eglot-server-programs &#39;((ruby-mode ruby-ts-mode) &quot;ruby-lsp&quot;)))</pre>

<p>When you run <code>eglot</code> command it will run <code>ruby-lsp</code> process for you.</p>

<h2 id="label-Neovim+LSP">Neovim LSP<span><a href="#label-Neovim+LSP">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>The <a href="https://github.com/neovim/nvim-lspconfig/blob/master/lua/lspconfig/server_configurations/ruby_ls.lua">nvim-lspconfig</a> plugin has support for Ruby LSP.</p>

<p>Ruby LSP only supports pull diagnostics, and neovim versions prior to v0.10.0-dev-695+g58f948614 only support <a href="https://microsoft.github.io/language-server-protocol/specifications/lsp/3.17/specification/#textDocument_publishDiagnostics">publishDiagnostics</a>. Additional setup is required to enable diagnostics from Ruby LSP to appear in neovim.</p>

<pre>-- textDocument/diagnostic support until 0.10.0 is released
_timers = {}
local function setup_diagnostics(client, buffer)
  if require(&quot;vim.lsp.diagnostic&quot;)._enable then
    return
  end

  local diagnostic_handler = function()
    local params = vim.lsp.util.make_text_document_params(buffer)
    client.request(&quot;textDocument/diagnostic&quot;, { textDocument = params }, function(err, result)
      if err then
        local err_msg = string.format(&quot;diagnostics error - %s&quot;, vim.inspect(err))
        vim.lsp.log.error(err_msg)
      end
      local diagnostic_items = {}
      if result then
        diagnostic_items = result.items
      end
      vim.lsp.diagnostic.on_publish_diagnostics(
        nil,
        vim.tbl_extend(&quot;keep&quot;, params, { diagnostics = diagnostic_items }),
        { client_id = client.id }
      )
    end)
  end

  diagnostic_handler() -- to request diagnostics on buffer when first attaching

  vim.api.nvim_buf_attach(buffer, false, {
    on_lines = function()
      if _timers[buffer] then
        vim.fn.timer_stop(_timers[buffer])
      end
      _timers[buffer] = vim.fn.timer_start(200, diagnostic_handler)
    end,
    on_detach = function()
      if _timers[buffer] then
        vim.fn.timer_stop(_timers[buffer])
      end
    end,
  })
end

-- adds ShowRubyDeps command to show dependencies in the quickfix list.
-- add the `all` argument to show indirect dependencies as well
local function add_ruby_deps_command(client, bufnr)
    vim.api.nvim_buf_create_user_command(bufnr, &quot;ShowRubyDeps&quot;,
                                          function(opts)

        local params = vim.lsp.util.make_text_document_params()

        local showAll = opts.args == &quot;all&quot;

        client.request(&quot;rubyLsp/workspace/dependencies&quot;, params,
                        function(error, result)
            if error then
                print(&quot;Error showing deps: &quot; .. error)
                return
            end

            local qf_list = {}
            for _, item in ipairs(result) do
                if showAll or item.dependency then
                    table.insert(qf_list, {
                        text = string.format(&quot;%s (%s) - %s&quot;,
                                              item.name,
                                              item.version,
                                              item.dependency),

                        filename = item.path
                    })
                end
            end

            vim.fn.setqflist(qf_list)
            vim.cmd(&#39;copen&#39;)
        end, bufnr)
    end, {nargs = &quot;?&quot;, complete = function()
        return {&quot;all&quot;}
    end})
end


require(&quot;lspconfig&quot;).ruby_ls.setup({
  on_attach = function(client, buffer)
    setup_diagnostics(client, buffer)
    add_ruby_deps_command(client, buffer)
  end,
})</pre>

<h2 id="label-Sublime+Text+LSP">Sublime Text LSP<span><a href="#label-Sublime+Text+LSP">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>To configure the Ruby LSP using <a href="https://github.com/sublimelsp/LSP">LSP for Sublime Text</a>, add the following configuration to your LSP client configuration:</p>

<pre>&quot;clients&quot;: {
  &quot;ruby-lsp&quot;: {
    &quot;enabled&quot;: true,
    &quot;command&quot;: [
      &quot;ruby-lsp&quot;
    ],
    &quot;selector&quot;: &quot;source.ruby&quot;,
    &quot;initializationOptions&quot;: {
      &quot;enabledFeatures&quot;: {
        &quot;diagnostics&quot;: false
      },
      &quot;experimentalFeaturesEnabled&quot;: true
    }
  }
}</pre>

<p>Restart LSP or Sublime Text and <code>ruby-lsp</code> will automatically activate when opening ruby files.</p>
</article>
  <div class="right-section">
  <nav class="right-nav">
    <span id="right-side-bar-title" class="right-side-bar-title">On this page</span>
      <ul>
        <li> <a href=#>EDITORS.md</a></li>

            <div class="nav-section">

              <ul class="link-list" role="directory">
                                    <li>
                      <details open>
                        <summary>                <a href="#label-Editors">Editors</a>
</summary>
                        <ul class="link-list" role="directory">
                                              <li>                <a href="#label-Emacs+Eglot">Emacs Eglot</a>
                    <li>                <a href="#label-Neovim+LSP">Neovim LSP</a>
                    <li>                <a href="#label-Sublime+Text+LSP">Sublime Text LSP</a>

                        </ul>
                      </details>
                    </li>

              </ul>
            </div>
  </nav>
</div>

</div>

<div id="search-modal">
  <div id="search-modal-content">
    <input id="search-modal-input" type="text" placeholder="Search"></input>
    <ul id="search-results"></ul>
  </div>
</div>


    <footer>
      <p>Generated by <a href="https://ruby.github.io/rdoc/">RDoc</a> 6.6.2
    </footer>
  </body>
</html>
